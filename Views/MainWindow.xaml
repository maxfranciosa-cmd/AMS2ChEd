<Window x:Class="AMS2ChEd.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="AMS2 Formula Championship Edition" 
        Height="900" Width="500"
        WindowStartupLocation="CenterScreen"
        Background="#1a1a1a">

    <Window.Resources>
        <Style x:Key="MenuButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#c41e3a"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#d32f2f"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#555555"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Height" Value="45"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#666666"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="LabelStyle" TargetType="Label">
            <Setter Property="Foreground" Value="#cccccc"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
        </Style>

        <Style x:Key="TextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="#2a2a2a"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#c41e3a"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Height" Value="35"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>

        <Style x:Key="ComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Background" Value="#2a2a2a"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#c41e3a"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Height" Value="35"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <ToggleButton x:Name="ToggleButton" 
                                        Background="#2a2a2a"
                                        BorderBrush="#c41e3a"
                                        BorderThickness="2"
                                        Focusable="False"
                                        IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                        ClickMode="Press">
                                <ToggleButton.Template>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Grid>
                                            <Border x:Name="Border" 
                                                  Background="{TemplateBinding Background}"
                                                  BorderBrush="{TemplateBinding BorderBrush}"
                                                  BorderThickness="{TemplateBinding BorderThickness}"/>
                                            <Path x:Name="Arrow" 
                                                HorizontalAlignment="Right" 
                                                VerticalAlignment="Center"
                                                Margin="0,0,10,0"
                                                Data="M 0 0 L 4 4 L 8 0 Z"
                                                Fill="White"/>
                                        </Grid>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                            </ToggleButton>
                            <ContentPresenter x:Name="ContentSite"
                                            IsHitTestVisible="False"
                                            Content="{TemplateBinding SelectionBoxItem}"
                                            ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                            ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                            Margin="5,3,23,3"
                                            VerticalAlignment="Center"
                                            HorizontalAlignment="Left">
                                <ContentPresenter.Resources>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground" Value="White"/>
                                    </Style>
                                </ContentPresenter.Resources>
                            </ContentPresenter>
                            <Popup x:Name="Popup"
                                 Placement="Bottom"
                                 IsOpen="{TemplateBinding IsDropDownOpen}"
                                 AllowsTransparency="True"
                                 Focusable="False"
                                 PopupAnimation="Slide">
                                <Grid x:Name="DropDown"
                                    SnapsToDevicePixels="True"
                                    MinWidth="{TemplateBinding ActualWidth}"
                                    MaxHeight="200">
                                    <Border x:Name="DropDownBorder"
                                          Background="#2a2a2a"
                                          BorderBrush="#c41e3a"
                                          BorderThickness="2"/>
                                    <ScrollViewer Margin="2" SnapsToDevicePixels="True">
                                        <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained"/>
                                    </ScrollViewer>
                                </Grid>
                            </Popup>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Resources>
                <Style TargetType="ComboBoxItem">
                    <Setter Property="Background" Value="#2a2a2a"/>
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ComboBoxItem">
                                <Border x:Name="Border" Background="{TemplateBinding Background}" BorderThickness="0">
                                    <ContentPresenter Margin="5,3,5,3"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsHighlighted" Value="True">
                                        <Setter TargetName="Border" Property="Background" Value="#c41e3a"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="Border" Property="Background" Value="#d32f2f"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Style.Resources>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Background="#0d0d0d" Margin="20">
            <TextBlock Text="AMS2" 
                       FontSize="48" 
                       FontWeight="Bold" 
                       Foreground="White" 
                       HorizontalAlignment="Center"/>
            <TextBlock Text="FORMULA CHAMPIONSHIP EDITION" 
                       FontSize="16" 
                       Foreground="#c41e3a" 
                       FontWeight="SemiBold"
                       HorizontalAlignment="Center"
                       Margin="0,5,0,0"/>
        </StackPanel>

        <!-- Main Content -->
        <Grid Grid.Row="1" Margin="40,30,40,30">
            <!-- Main Menu Panel -->
            <StackPanel x:Name="MainMenuPanel" Visibility="Visible">
                <Button x:Name="NewGameButton" 
                        Content="NEW GAME" 
                        Style="{StaticResource MenuButtonStyle}"
                        Click="NewGameButton_Click"/>

                <Button x:Name="LoadGameButton" 
                        Content="LOAD GAME" 
                        Style="{StaticResource MenuButtonStyle}"
                        Click="LoadGameButton_Click"/>

                <Button x:Name="OptionsButton" 
                        Content="OPTIONS" 
                        Style="{StaticResource MenuButtonStyle}"
                        Click="OptionsButton_Click"/>
            </StackPanel>

            <!-- New Game Panel -->
            <StackPanel x:Name="NewGamePanel" Visibility="Collapsed">
                <Label Content="SELECT SEASON:" Style="{StaticResource LabelStyle}"/>
                <ComboBox x:Name="SeasonComboBox" 
                          Style="{StaticResource ComboBoxStyle}"/>

                <Label Content="DRIVER NAME:" Style="{StaticResource LabelStyle}" Margin="0,10,0,5"/>
                <TextBox x:Name="DriverNameTextBox" Style="{StaticResource TextBoxStyle}"/>

                <Label Content="NATIONALITY:" Style="{StaticResource LabelStyle}"/>
                <TextBox x:Name="NationalityTextBox" 
                         Style="{StaticResource TextBoxStyle}"
                         MaxLength="3"
                         LostFocus="NationalityTextBox_LostFocus"/>

                <Label Content="DRIVER AGE:" Style="{StaticResource LabelStyle}"/>
                <TextBox x:Name="DriverAgeTextBox" 
                         Style="{StaticResource TextBoxStyle}"
                         PreviewTextInput="DriverAgeTextBox_PreviewTextInput"
                         TextChanged="DriverAgeTextBox_TextChanged"/>

                <Label Content="REPUTATION:" Style="{StaticResource LabelStyle}"/>
                <ComboBox x:Name="ReputationComboBox" 
                          Style="{StaticResource ComboBoxStyle}"
                          SelectionChanged="ReputationComboBox_SelectionChanged"/>

                <TextBlock x:Name="ReputationDescriptionText"
                           Foreground="#aaaaaa"
                           FontSize="12"
                           FontStyle="Italic"
                           TextWrapping="Wrap"
                           Margin="0,0,0,15"
                           MinHeight="60"/>

                <Button x:Name="CreateGameButton" 
                        Content="CREATE GAME" 
                        Style="{StaticResource MenuButtonStyle}"
                        Margin="0,20,0,10"
                        Click="CreateGameButton_Click"/>

                <Button Content="BACK" 
                        Style="{StaticResource SecondaryButtonStyle}"
                        Click="BackButton_Click"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>